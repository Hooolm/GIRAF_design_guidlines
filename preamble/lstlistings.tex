%!TEX root = ../main.tex

% Packages used
\usepackage{listings}

% ================================================ %

\captionsetup[lstlisting]{
    format = listing
}

% Default style for all lstlistings
\lstset 
{
    backgroundcolor = \color{white},
    keywordstyle = \color{blue},
    commentstyle = \color{code_gray}\textit,
    stringstyle = \color{green},
    basicstyle = \scriptsize\ttfamily,
    numberstyle = \tiny,
    numbers = left,
    breaklines = true,
    breakatwhitespace=true,
    showstringspaces = false,
    tabsize = 3,
    captionpos = t,
    extendedchars = true,
    escapeinside = {//*}{\^^M}, % Use latex inside lstlistings. For instance for refferences.
    frame = tblr,
    backgroundcolor = \color{gray!5},
    xleftmargin = 3.5pt,
}

% Write "Code snippet" instead of "listing".
\renewcommand{\lstlistingname}{Code Snippet}

% General style for the whole lstlisting
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{gray}{\parbox{0.9934\textwidth}{#1#2#3}}}
\captionsetup[lstlisting]{format = listing, labelfont = white, textfont = white}

% Import the Java language
\lstloadlanguages{Java}

% Custom lststyle named java
\lstdefinestyle{java}
{
    breaklines = true,
    language = Java,
    columns = fullflexible,
    stringstyle=\color{code_blue},
    morekeywords=[1]{class, return},
    morekeywords=[2]{@Override},
    keywordstyle=[1]\color{code_red},
    keywordstyle=[2]\color{Bittersweet}
}

% Define a Groovy Language
\lstdefinelanguage{Groovy}[]{Java}{%
  keywordstyle=\color{code_blue}\bfseries,
  stringstyle=\color{code_red}\ttfamily,
  keywords=[3]{each, findAll, groupBy, collect, inject, eachWithIndex},
  morekeywords={def, as, in, use},
  moredelim=[is][\textcolor{darkgray}]{\%\%}{\%\%},
  moredelim=[il][\textcolor{darkgray}]{§§}
}

% Define a style for gradle
\lstdefinestyle{gradle}
{
    breaklines = true,
    language = Groovy,
    columns = fullflexible,
}

% Define the XML language
\lstdefinelanguage{XML}
{
  morestring=[b]",
  morestring=[s]{>}{<},
  morecomment=[s]{<?}{?>},
  stringstyle=\color{black},
  identifierstyle=\color{code_darkblue},
  keywordstyle=\color{code_cyan},
  morekeywords={xmlns,version,type, android:}
  morecomment=[l][\color{code_red}\ttfamily]{androdid:}, 
  morecomment = [n]{<!--}{--!>}
}

\lstdefinelanguage{XML_android}
{
    alsoletter=-,
    basicstyle=\ttfamily\footnotesize,
    morestring=[b]",
    moredelim=*[s][\color{code_darkblue}]{<}{\ },
    moredelim=[s][\color{code_darkblue}]{</}{>},
    moredelim=[l][\color{code_darkblue}]{/>},
    moredelim=[l][\color{code_darkblue}]{>},
    morecomment=[s]{<?}{?>},
    morecomment=[s]{<!--}{-->},
    morecomment=[s]{<!}{>},
    commentstyle=\color{code_gray},
    stringstyle=\color{code_cyan},
    identifierstyle=\color{black}
}

% Custom lststyle named java
\lstdefinestyle{xml}
{
    breaklines = true,
    language = XML_android,
    columns = fullflexible,
}

% Custom lstinline for Java named javainline
\newcommand{\androidinline}[1]{\lstinline[style = java, basicstyle = \ttfamily\normalsize]{#1}}
